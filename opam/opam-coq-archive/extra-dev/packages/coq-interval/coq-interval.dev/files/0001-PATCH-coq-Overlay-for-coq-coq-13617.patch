From dcdc62d2d85cc0ab5e67a49df9e67b1c76468bde Mon Sep 17 00:00:00 2001
From: Michael Soegtrop <7895506+MSoegtropIMC@users.noreply.github.com>
Date: Sun, 13 Jun 2021 17:28:45 +0200
Subject: [PATCH] [PATCH] [coq] Overlay for coq/coq#13617 (Ported patch for
 gappa from E.Gallego)

---
 Remakefile.in | 2 +-
 configure.in  | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/Remakefile.in b/Remakefile.in
index 6ee3e00..8305830 100644
--- a/Remakefile.in
+++ b/Remakefile.in
@@ -68,7 +68,7 @@ src/Tactic_float.v: src/Tactic_bignum.v src/Tactic_primfloat.v Remakefile
 	@COQC@ @COQEXTRAFLAGS@ -R src Interval $<
 
 COQPKGS = clib engine kernel interp lib library parsing pretyping printing proofs tactics toplevel vernac plugins.ltac
-PACKAGES = $(addprefix -package coq., $(COQPKGS)) -package @BIGINTPKG@
+PACKAGES = $(addprefix -package coq-core., $(COQPKGS)) -package @BIGINTPKG@
 
 src/Plot/interval_plot.ml: src/Plot/plot.c
 	@CPP@ -DCOQVERSION=@COQVERSION@ $< -o $@
diff --git a/configure.in b/configure.in
index 06fd191..3150f69 100644
--- a/configure.in
+++ b/configure.in
@@ -148,7 +148,7 @@ if test "$native_tactic" = yes; then
   AC_MSG_CHECKING([for native development files])
   AS_IF(
     [ echo "let _ = (Evd.empty, $BIGINTMOD.zero_big_int)" > conftest.ml
-      $OCAMLFIND ocamlopt -rectypes -thread -package coq.engine -package $BIGINTPKG -shared conftest.ml -o conftest.cmxs ],
+      $OCAMLFIND ocamlopt -rectypes -thread -package coq-core.engine -package $BIGINTPKG -shared conftest.ml -o conftest.cmxs ],
     [ AC_MSG_RESULT(yes) ],
     [ AC_MSG_RESULT(no)
       AC_MSG_ERROR([ *** Failed to compile a native OCaml library ]) ])
@@ -158,7 +158,7 @@ if test "$byte_tactic" = yes; then
   AC_MSG_CHECKING([for bytecode development files])
   AS_IF(
     [ echo "let _ = (Evd.empty, $BIGINTMOD.zero_big_int)" > conftest.ml
-      $OCAMLFIND ocamlc -rectypes -thread -package coq.engine -package $BIGINTPKG -c conftest.ml -o conftest.cmo ],
+      $OCAMLFIND ocamlc -rectypes -thread -package coq-core.engine -package $BIGINTPKG -c conftest.ml -o conftest.cmo ],
     [ AC_MSG_RESULT(yes) ],
     [ AC_MSG_RESULT(no)
       AC_MSG_ERROR([ *** Failed to compile a bytecode OCaml library ]) ])
-- 
2.24.3 (Apple Git-128)

